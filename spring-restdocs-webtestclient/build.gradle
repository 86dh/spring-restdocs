plugins {
	id "java-library"
	id "matrixtest"
	id "maven-publish"
}

description = "Spring REST Docs WebFlux"

dependencies {
	api(project(":spring-restdocs-core"))
	api("org.springframework:spring-test")
	api("org.springframework:spring-webflux")

	internal(platform(project(":spring-restdocs-platform")))

	testImplementation(project(path: ":spring-restdocs-core", configuration: "testArtifacts"))
	testImplementation("org.assertj:assertj-core")
	testImplementation("org.hamcrest:hamcrest-library")
	testImplementation("org.mockito:mockito-core")

	testRuntimeOnly("org.springframework:spring-context")
	testRuntimeOnly("org.synchronoss.cloud:nio-multipart-parser")
}

matrixTest {
	springFramework {
		group = "org.springframework"
		versions = ["5.1.+", "5.2.+", "5.3.+"]
	}
}

project.afterEvaluate {
	configurations.getByName("testRuntimeClasspath_org.springframework_5.3.+") {
		exclude group: "org.synchronoss.cloud", module: "nio-multipart-parser"
	}	
}
